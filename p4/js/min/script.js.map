{"version":3,"sources":["script.js"],"names":["BossSaying","comments","click","content","init","window","document","getElementById","moreBtn","getElementsByClassName","i","length","addEventListener","handleClick","msgBody","ref","dataset","text","innerHTML","TextEllipsis","e","target","id","classList","add","className","comment","name","querySelector","photo","lightbox","getLightbox","src","appendChild","handleTransition","stopPropagation","removeChild","lastChild","imgsrc","lightSect","createElement","popupDiv","closeBtn","profileDiv","nameNode","textNode","contentDiv","bind","this"],"mappings":"AAAA,GAAIA,aACFC,YACAC,MAAO,KACPC,QAAS,KACTC,KAAM,WACJJ,WAAWE,MAAQ,SAAWG,QAAS,aAAe,QACtDL,WAAWG,QAAUG,SAASC,eAAe,UAE7C,KAAK,GADDC,GAAUF,SAASG,uBAAuB,YACrCC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAClCF,EAAQE,GAAGE,iBAAiBZ,WAAWE,MAAOF,WAAWa,YAI3D,KAAK,GADDC,GAAUR,SAASG,uBAAuB,gBACrCC,EAAI,EAAGA,EAAII,EAAQH,OAAQD,IAAK,CACvC,GAAIK,GAAMD,EAAQJ,GAAGM,QAAQD,IACzBE,EAAOH,EAAQJ,GAAGQ,SACtBlB,YAAWC,SAASc,GAAOE,EAG7BE,aAAaR,OAAS,GACtBQ,aAAaf,QAGfS,YAAa,SAASO,GACpB,GAAoB,mBAAhBA,EAAEC,OAAOC,GACXhB,SAASC,eAAe,YAAYgB,UAAUC,IAAI,oBAC7C,IAA0B,aAAvBJ,EAAEC,OAAOI,UAAyB,CAC1C,GAAIV,GAAMK,EAAEC,OAAOL,QAAQD,IACvBW,EAAUpB,SAASC,eAAeQ,GAClCY,EAAOD,EAAQE,cAAc,iBAC7BC,EAAQH,EAAQE,cAAc,kBAC9BX,EAAOjB,WAAWC,SAASc,GAC3Be,EAAW9B,WAAW+B,YAAYJ,EAAKT,UAAWW,EAAMG,IAAKf,EACjEjB,YAAWG,QAAQ8B,YAAYH,KAInCI,iBAAkB,SAASd,GACzBA,EAAEe,kBACFnC,WAAWG,QAAQiC,YAAYpC,WAAWG,QAAQkC,YAGpDN,YAAa,SAASJ,EAAMW,EAAQrB,GAClC,GAAIsB,GAAYjC,SAASkC,cAAc,UACvCD,GAAUjB,GAAK,WACfiB,EAAU3B,iBAAiB,sBAAuBZ,WAAWkC,kBAC7DK,EAAU3B,iBAAiB,gBAAiBZ,WAAWkC,iBACvD,IAAIO,GAAWnC,SAASkC,cAAc,MACtCC,GAAShB,UAAY,OACrB,IAAIiB,GAAWpC,SAASkC,cAAc,OACtCE,GAASpB,GAAK,iBACdoB,EAAS9B,iBAAiBZ,WAAWE,MAAOF,WAAWa,YAEvD,IAAI8B,GAAarC,SAASkC,cAAc,MACxCG,GAAWlB,UAAY,eACvB,IAAII,GAAQvB,SAASkC,cAAc,MACnCX,GAAMG,IAAMM,CACZ,IAAIM,GAAWtC,SAASkC,cAAc,IACtCI,GAAS1B,UAAYS,CAErB,IAAIkB,GAAWvC,SAASkC,cAAc,IACtCK,GAASpB,UAAY,aACrBoB,EAAS3B,UAAYD,EAErB0B,EAAWV,YAAYJ,GACvBc,EAAWV,YAAYW,EAEvB,IAAIE,GAAaxC,SAASkC,cAAc,MAUxC,OATAM,GAAWrB,UAAY,gBACvBqB,EAAWb,YAAYU,GACvBG,EAAWb,YAAYY,GAEvBJ,EAASR,YAAYS,GACrBD,EAASR,YAAYa,GAErBP,EAAUN,YAAYQ,GAEfF,GAIXlC,QAAOO,iBAAiB,OAAQZ,WAAWI,KAAK2C,KAAKC","file":"script.js","sourcesContent":["var BossSaying = {\n  comments: [],\n  click: null,\n  content: null,\n  init: function() {\n    BossSaying.click = 'touch' in window ? 'touchstart' : 'click';\n    BossSaying.content = document.getElementById('content');\n    var moreBtn = document.getElementsByClassName('more-btn');\n    for (var i = 0; i < moreBtn.length; i++) {\n      moreBtn[i].addEventListener(BossSaying.click, BossSaying.handleClick);\n    }\n\n    var msgBody = document.getElementsByClassName('message-body');\n    for (var i = 0; i < msgBody.length; i++) {\n      var ref = msgBody[i].dataset.ref;\n      var text = msgBody[i].innerHTML;\n      BossSaying.comments[ref] = text;\n    }\n\n    TextEllipsis.length = 58;\n    TextEllipsis.init();\n  },\n\n  handleClick: function(e) {\n    if (e.target.id === 'popup-closeBtn') {\n      document.getElementById('lightbox').classList.add('null-opacity');\n    } else if(e.target.className === 'more-btn'){\n      var ref = e.target.dataset.ref;\n      var comment = document.getElementById(ref);\n      var name = comment.querySelector('.profile-name');\n      var photo = comment.querySelector('.profile-photo');\n      var text = BossSaying.comments[ref];\n      var lightbox = BossSaying.getLightbox(name.innerHTML, photo.src, text);\n      BossSaying.content.appendChild(lightbox);\n    }\n  },\n\n  handleTransition: function(e) {\n    e.stopPropagation();\n    BossSaying.content.removeChild(BossSaying.content.lastChild);\n  },\n\n  getLightbox: function(name, imgsrc, text) {\n    var lightSect = document.createElement('section');\n    lightSect.id = 'lightbox';\n    lightSect.addEventListener('webkitTransitionEnd', BossSaying.handleTransition);\n    lightSect.addEventListener('transitionend', BossSaying.handleTransition);\n    var popupDiv = document.createElement('div');\n    popupDiv.className = 'popup';\n    var closeBtn = document.createElement('span');\n    closeBtn.id = 'popup-closeBtn';\n    closeBtn.addEventListener(BossSaying.click, BossSaying.handleClick);\n\n    var profileDiv = document.createElement('div');\n    profileDiv.className = 'popup-profile';\n    var photo = document.createElement('img');\n    photo.src = imgsrc;\n    var nameNode = document.createElement('p');\n    nameNode.innerHTML = name;\n\n    var textNode = document.createElement('p');\n    textNode.className = 'popup-text';\n    textNode.innerHTML = text;\n\n    profileDiv.appendChild(photo);\n    profileDiv.appendChild(nameNode);\n\n    var contentDiv = document.createElement('div');\n    contentDiv.className = 'popup-content';\n    contentDiv.appendChild(profileDiv);\n    contentDiv.appendChild(textNode);\n\n    popupDiv.appendChild(closeBtn);\n    popupDiv.appendChild(contentDiv);\n\n    lightSect.appendChild(popupDiv);\n\n    return lightSect;\n  }\n};\n\nwindow.addEventListener('load', BossSaying.init.bind(this));"],"sourceRoot":"/source/"}